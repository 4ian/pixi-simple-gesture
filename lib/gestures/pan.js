'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = panable;
function panable(sprite, inertia) {

  function mouseDown(e) {
    start(e.data.originalEvent);
  }

  function touchStart(e) {
    start(e.data.originalEvent.targetTouches[0]);
  }

  function start(t) {
    if (sprite._pan) {
      if (!sprite._pan.intervalId) {
        return;
      }
      clearInterval(sprite._pan.intervalId);
      sprite.emit('panend');
    }
    sprite._pan = {
      p: {
        x: t.clientX,
        y: t.clientY,
        date: new Date()
      }
    };
    sprite.on('mousemove', mouseMove).on('touchmove', touchMove);
  }

  function mouseMove(e) {
    move(e, e.data.originalEvent);
  }

  function touchMove(e) {
    var t = e.data.originalEvent.targetTouches;
    if (!t || t.length > 1) {
      end(e, t[0]);
      return;
    }
    move(e, t[0]);
  }

  function move(e, t) {
    var now = new Date();
    var interval = now - sprite._pan.p.date;
    if (interval < 12) {
      return;
    }
    var dx = t.clientX - sprite._pan.p.x;
    var dy = t.clientY - sprite._pan.p.y;
    var distance = Math.sqrt(dx * dx + dy * dy);
    if (!sprite._pan.pp) {
      var threshold = t instanceof window.MouseEvent ? 2 : 7;
      if (distance > threshold) {
        sprite.emit('panstart');
      } else {
        return;
      }
    } else {
      var event = {
        deltaX: dx,
        deltaY: dy,
        velocity: distance / interval,
        data: e.data
      };
      sprite.emit('panmove', event);
    }
    sprite._pan.pp = {
      x: sprite._pan.p.x,
      y: sprite._pan.p.y,
      date: sprite._pan.p.date
    };
    sprite._pan.p = {
      x: t.clientX,
      y: t.clientY,
      date: now
    };
  }

  function mouseUp(e) {
    end(e, e.data.originalEvent);
  }

  function touchEnd(e) {
    end(e, e.data.originalEvent.changedTouches[0]);
  }

  function end(e, t) {
    sprite.removeListener('mousemove', mouseMove).removeListener('touchmove', touchMove);
    if (!sprite._pan || !sprite._pan.pp) {
      sprite._pan = null;
      return;
    }
    if (inertia) {
      if (sprite._pan.intervalId) {
        return;
      }
      var interval = new Date() - sprite._pan.pp.date;
      var vx = (t.clientX - sprite._pan.pp.x) / interval;
      var vy = (t.clientY - sprite._pan.pp.y) / interval;
      sprite._pan.intervalId = setInterval(function () {
        if (Math.abs(vx) < 0.04 && Math.abs(vy) < 0.04) {
          clearInterval(sprite._pan.intervalId);
          sprite.emit('panend');
          sprite._pan = null;
          return;
        }
        var touch = {
          clientX: sprite._pan.p.x + vx * 12,
          clientY: sprite._pan.p.y + vy * 12
        };
        move(e, touch);
        vx *= 0.9;
        vy *= 0.9;
      }, 12);
    } else {
      sprite.emit('panend');
      sprite._pan = null;
    }
  }

  sprite.interactive = true;
  sprite.on('mousedown', mouseDown).on('touchstart', touchStart).on('mouseup', mouseUp).on('mouseupoutside', mouseUp).on('touchend', touchEnd).on('touchendoutside', touchEnd);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9nZXN0dXJlcy9wYW4uanMiXSwibmFtZXMiOlsicGFuYWJsZSIsInNwcml0ZSIsImluZXJ0aWEiLCJtb3VzZURvd24iLCJlIiwic3RhcnQiLCJkYXRhIiwib3JpZ2luYWxFdmVudCIsInRvdWNoU3RhcnQiLCJ0YXJnZXRUb3VjaGVzIiwidCIsIl9wYW4iLCJpbnRlcnZhbElkIiwiY2xlYXJJbnRlcnZhbCIsImVtaXQiLCJwIiwieCIsImNsaWVudFgiLCJ5IiwiY2xpZW50WSIsImRhdGUiLCJEYXRlIiwib24iLCJtb3VzZU1vdmUiLCJ0b3VjaE1vdmUiLCJtb3ZlIiwibGVuZ3RoIiwiZW5kIiwibm93IiwiaW50ZXJ2YWwiLCJkeCIsImR5IiwiZGlzdGFuY2UiLCJNYXRoIiwic3FydCIsInBwIiwidGhyZXNob2xkIiwid2luZG93IiwiTW91c2VFdmVudCIsImV2ZW50IiwiZGVsdGFYIiwiZGVsdGFZIiwidmVsb2NpdHkiLCJtb3VzZVVwIiwidG91Y2hFbmQiLCJjaGFuZ2VkVG91Y2hlcyIsInJlbW92ZUxpc3RlbmVyIiwidngiLCJ2eSIsInNldEludGVydmFsIiwiYWJzIiwidG91Y2giLCJpbnRlcmFjdGl2ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7a0JBQXdCQSxPO0FBQVQsU0FBU0EsT0FBVCxDQUFrQkMsTUFBbEIsRUFBMEJDLE9BQTFCLEVBQW1DOztBQUVoRCxXQUFTQyxTQUFULENBQW9CQyxDQUFwQixFQUF1QjtBQUNyQkMsVUFBTUQsRUFBRUUsSUFBRixDQUFPQyxhQUFiO0FBQ0Q7O0FBRUQsV0FBU0MsVUFBVCxDQUFxQkosQ0FBckIsRUFBd0I7QUFDdEJDLFVBQU1ELEVBQUVFLElBQUYsQ0FBT0MsYUFBUCxDQUFxQkUsYUFBckIsQ0FBbUMsQ0FBbkMsQ0FBTjtBQUNEOztBQUVELFdBQVNKLEtBQVQsQ0FBZ0JLLENBQWhCLEVBQW1CO0FBQ2pCLFFBQUlULE9BQU9VLElBQVgsRUFBaUI7QUFDZixVQUFJLENBQUNWLE9BQU9VLElBQVAsQ0FB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bUJBQVNoQixPQUFPVSxJQUFQLENBQVlJLENBQVosQ0FBY0MsQ0FBZCxHQUFrQitCLEtBQUssRUFEdEI7QUFFVjVCLG1CQUFTbEIsT0FBT1UsSUFBUCxDQUFZSSxDQUFaLENBQWNHLENBQWQsR0FBa0I4QixLQUFLO0FBRnRCLFNBQVo7QUFJQXZCLGFBQUtyQixDQUFMLEVBQVErQyxLQUFSO0FBQ0FKLGNBQU0sR0FBTjtBQUNBQyxjQUFNLEdBQU47QUFDRCxPQWR3QixFQWN0QixFQWRzQixDQUF6QjtBQWVELEtBdEJELE1Bc0JPO0FBQ0wvQyxhQUFPYSxJQUFQLENBQVksUUFBWjtBQUNBYixhQUFPVSxJQUFQLEdBQWMsSUFBZDtBQUNEO0FBQ0Y7O0FBRURWLFNBQU9tRCxXQUFQLEdBQXFCLElBQXJCO0FBQ0FuRCxTQUNHcUIsRUFESCxDQUNNLFdBRE4sRUFDbUJuQixTQURuQixFQUVHbUIsRUFGSCxDQUVNLFlBRk4sRUFFb0JkLFVBRnBCLEVBR0djLEVBSEgsQ0FHTSxTQUhOLEVBR2lCcUIsT0FIakIsRUFJR3JCLEVBSkgsQ0FJTSxnQkFKTixFQUl3QnFCLE9BSnhCLEVBS0dyQixFQUxILENBS00sVUFMTixFQUtrQnNCLFFBTGxCLEVBTUd0QixFQU5ILENBTU0saUJBTk4sRUFNeUJzQixRQU56QjtBQU9EIiwiZmlsZSI6InBhbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHBhbmFibGUgKHNwcml0ZSwgaW5lcnRpYSkge1xuXG4gIGZ1bmN0aW9uIG1vdXNlRG93biAoZSkge1xuICAgIHN0YXJ0KGUuZGF0YS5vcmlnaW5hbEV2ZW50KVxuICB9XG5cbiAgZnVuY3Rpb24gdG91Y2hTdGFydCAoZSkge1xuICAgIHN0YXJ0KGUuZGF0YS5vcmlnaW5hbEV2ZW50LnRhcmdldFRvdWNoZXNbMF0pXG4gIH1cblxuICBmdW5jdGlvbiBzdGFydCAodCkge1xuICAgIGlmIChzcHJpdGUuX3Bhbikge1xuICAgICAgaWYgKCFzcHJpdGUuX3Bhbi5pbnRlcnZhbElkKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY2xlYXJJbnRlcnZhbChzcHJpdGUuX3Bhbi5pbnRlcnZhbElkKVxuICAgICAgc3ByaXRlLmVtaXQoJ3BhbmVuZCcpXG4gICAgfVxuICAgIHNwcml0ZS5fcGFuID0ge1xuICAgICAgcDoge1xuICAgICAgICB4OiB0LmNsaWVudFgsXG4gICAgICAgIHk6IHQuY2xpZW50WSxcbiAgICAgICAgZGF0ZTogbmV3IERhdGUoKVxuICAgICAgfVxuICAgIH1cbiAgICBzcHJpdGVcbiAgICAgIC5vbignbW91c2Vtb3ZlJywgbW91c2VNb3ZlKVxuICAgICAgLm9uKCd0b3VjaG1vdmUnLCB0b3VjaE1vdmUpXG4gIH1cblxuICBmdW5jdGlvbiBtb3VzZU1vdmUgKGUpIHtcbiAgICBtb3ZlKGUsIGUuZGF0YS5vcmlnaW5hbEV2ZW50KVxuICB9XG5cbiAgZnVuY3Rpb24gdG91Y2hNb3ZlIChlKSB7XG4gICAgbGV0IHQgPSBlLmRhdGEub3JpZ2luYWxFdmVudC50YXJnZXRUb3VjaGVzXG4gICAgaWYgKCF0IHx8IHQubGVuZ3RoID4gMSkge1xuICAgICAgZW5kKGUsIHRbMF0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgbW92ZShlLCB0WzBdKVxuICB9XG5cbiAgZnVuY3Rpb24gbW92ZSAoZSwgdCkge1xuICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpXG4gICAgbGV0IGludGVydmFsID0gbm93IC0gc3ByaXRlLl9wYW4ucC5kYXRlXG4gICAgaWYgKGludGVydmFsIDwgMTIpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBsZXQgZHggPSB0LmNsaWVudFggLSBzcHJpdGUuX3Bhbi5wLnhcbiAgICBsZXQgZHkgPSB0LmNsaWVudFkgLSBzcHJpdGUuX3Bhbi5wLnlcbiAgICBsZXQgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpXG4gICAgaWYgKCFzcHJpdGUuX3Bhbi5wcCkge1xuICAgICAgbGV0IHRocmVzaG9sZCA9ICh0IGluc3RhbmNlb2Ygd2luZG93Lk1vdXNlRXZlbnQpID8gMiA6IDdcbiAgICAgIGlmIChkaXN0YW5jZSA+IHRocmVzaG9sZCkge1xuICAgICAgICBzcHJpdGUuZW1pdCgncGFuc3RhcnQnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBldmVudCA9IHtcbiAgICAgICAgZGVsdGFYOiBkeCxcbiAgICAgICAgZGVsdGFZOiBkeSxcbiAgICAgICAgdmVsb2NpdHk6IGRpc3RhbmNlIC8gaW50ZXJ2YWwsXG4gICAgICAgIGRhdGE6IGUuZGF0YVxuICAgICAgfVxuICAgICAgc3ByaXRlLmVtaXQoJ3Bhbm1vdmUnLCBldmVudClcbiAgICB9XG4gICAgc3ByaXRlLl9wYW4ucHAgPSB7XG4gICAgICB4OiBzcHJpdGUuX3Bhbi5wLngsXG4gICAgICB5OiBzcHJpdGUuX3Bhbi5wLnksXG4gICAgICBkYXRlOiBzcHJpdGUuX3Bhbi5wLmRhdGVcbiAgICB9XG4gICAgc3ByaXRlLl9wYW4ucCA9IHtcbiAgICAgIHg6IHQuY2xpZW50WCxcbiAgICAgIHk6IHQuY2xpZW50WSxcbiAgICAgIGRhdGU6IG5vd1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdXNlVXAgKGUpIHtcbiAgICBlbmQoZSwgZS5kYXRhLm9yaWdpbmFsRXZlbnQpXG4gIH1cblxuICBmdW5jdGlvbiB0b3VjaEVuZCAoZSkge1xuICAgIGVuZChlLCBlLmRhdGEub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGVuZCAoZSwgdCkge1xuICAgIHNwcml0ZVxuICAgICAgLnJlbW92ZUxpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3VzZU1vdmUpXG4gICAgICAucmVtb3ZlTGlzdGVuZXIoJ3RvdWNobW92ZScsIHRvdWNoTW92ZSlcbiAgICBpZiAoIXNwcml0ZS5fcGFuIHx8ICFzcHJpdGUuX3Bhbi5wcCkge1xuICAgICAgc3ByaXRlLl9wYW4gPSBudWxsXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKGluZXJ0aWEpIHtcbiAgICAgIGlmIChzcHJpdGUuX3Bhbi5pbnRlcnZhbElkKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgbGV0IGludGVydmFsID0gbmV3IERhdGUoKSAtIHNwcml0ZS5fcGFuLnBwLmRhdGVcbiAgICAgIGxldCB2eCA9ICh0LmNsaWVudFggLSBzcHJpdGUuX3Bhbi5wcC54KSAvIGludGVydmFsXG4gICAgICBsZXQgdnkgPSAodC5jbGllbnRZIC0gc3ByaXRlLl9wYW4ucHAueSkgLyBpbnRlcnZhbFxuICAgICAgc3ByaXRlLl9wYW4uaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgaWYgKE1hdGguYWJzKHZ4KSA8IDAuMDQgJiYgTWF0aC5hYnModnkpIDwgMC4wNCkge1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoc3ByaXRlLl9wYW4uaW50ZXJ2YWxJZClcbiAgICAgICAgICBzcHJpdGUuZW1pdCgncGFuZW5kJylcbiAgICAgICAgICBzcHJpdGUuX3BhbiA9IG51bGxcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBsZXQgdG91Y2ggPSB7XG4gICAgICAgICAgY2xpZW50WDogc3ByaXRlLl9wYW4ucC54ICsgdnggKiAxMixcbiAgICAgICAgICBjbGllbnRZOiBzcHJpdGUuX3Bhbi5wLnkgKyB2eSAqIDEyXG4gICAgICAgIH1cbiAgICAgICAgbW92ZShlLCB0b3VjaClcbiAgICAgICAgdnggKj0gMC45XG4gICAgICAgIHZ5ICo9IDAuOVxuICAgICAgfSwgMTIpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNwcml0ZS5lbWl0KCdwYW5lbmQnKVxuICAgICAgc3ByaXRlLl9wYW4gPSBudWxsXG4gICAgfVxuICB9XG5cbiAgc3ByaXRlLmludGVyYWN0aXZlID0gdHJ1ZVxuICBzcHJpdGVcbiAgICAub24oJ21vdXNlZG93bicsIG1vdXNlRG93bilcbiAgICAub24oJ3RvdWNoc3RhcnQnLCB0b3VjaFN0YXJ0KVxuICAgIC5vbignbW91c2V1cCcsIG1vdXNlVXApXG4gICAgLm9uKCdtb3VzZXVwb3V0c2lkZScsIG1vdXNlVXApXG4gICAgLm9uKCd0b3VjaGVuZCcsIHRvdWNoRW5kKVxuICAgIC5vbigndG91Y2hlbmRvdXRzaWRlJywgdG91Y2hFbmQpXG59XG4iXX0=